package br.com.fiap.aplicacao;

import java.util.Set;

import javax.swing.JOptionPane;

import br.com.fiap.dao.EventosDao;
import br.com.fiap.dao.ParticipantesDao;
import br.com.fiap.entity.Evento;
import br.com.fiap.entity.Participante;

public class ListarParticipantes {
	public static void main(String[] args) {
		try {
			//Buscando o evento
			EventosDao dao = new EventosDao();
			Set<Evento> listaEventos = dao.listar();
			
			Evento evento = (Evento)JOptionPane.showInputDialog(
					null,
					"Selecione um evento",
					"Eventos",
					JOptionPane.DEFAULT_OPTION,
					null,
					listaEventos.toArray(),
					null);
			
			Set<Participante> listaParticipantes = new ParticipantesDao()
					.listar(evento.getId());
			if(listaParticipantes.size() == 0) {
				JOptionPane.showMessageDialog(
						null, 
						"Participante incluído com sucesso",
						"Mensagem",
						JOptionPane.WARNING_MESSAGE);
				return;
			}
			for (Participante participante : listaParticipantes) {
				System.out.println("Id: " + participante.getId());
				System.out.println("Nome: " + participante.getNome());
				System.out.println("Email: " + participante.getEmail());
				System.out.println("----------------------------");
			}
			
			
		} catch (Exception e) {
			JOptionPane.showMessageDialog(
					null, 
					"ERRO: " + e.getMessage(),
					"Erro",
					JOptionPane.ERROR_MESSAGE);
		}
	}
}
